Q-Transaction
BEGIN TRANSACTION InsertNewEmp  
       INSERT INTO emp VALUES(8010,'PETER','ANALYST',7782,'1982-01-23',3000,NULL,20) 
Commit TRANSACTION InsertNewEmp

BEGIN TRANSACTION DeleteNewEmp
	DELETE FROM emp where empno=8010
Rollback TRANSACTION DeleteNewEmp


Q-create a trigger which doesnt allow sal update if
current sal is more than proposed

create TRIGGER trgUpdateSal ON emp
INSTEAD OF UPDATE
AS
	declare @empno int
	declare @prosal int
	declare @currsal int
	select @prosal=i.sal from inserted i
	select @currsal=d.sal from deleted d
	select @empno=d.empno from deleted d
	BEGIN
		if(@prosal<@currsal)
		begin
		RAISERROR('Cannot update salary less than current salary',16,1)
		end
		else
		begin
			update emp set sal=@prosal where empno=@empno
			PRINT 'Record Updated -- Instead of Update Trigger.'
		end
	END
GO


Q-create a trigger which does not allow delete on emp
on Tuesday

alter TRIGGER trgInsteadOfDeleteTues ON dept
INSTEAD OF DELETE
AS
	declare @deptno int
	declare @day datetime
	set @day=SYSDATETIME()
	select @deptno=d.deptno from deleted d
	BEGIN
		if(datepart(weekday,@day)=3)
		begin
		RAISERROR('Cannot delete data today',16,1)
		end
		else
		begin
			delete from dept where deptno=@deptno
			PRINT 'Record Deleted -- Instead of Delete Trigger.'
		end
	END
GO
insert into dept VALUES(50,'HR','AUS')

delete from dept where deptno=50
